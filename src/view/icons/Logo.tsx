import React from 'react'
import {StyleSheet, type TextProps} from 'react-native'
import Svg, {
  Defs,
  G,
  LinearGradient,
  Path,
  type PathProps,
  Stop,
  type SvgProps,
} from 'react-native-svg'
import {Image} from 'expo-image'

import {colors} from '#/lib/styles'
import {useKawaiiMode} from '#/state/preferences/kawaii'

const ratio = 57 / 64

type Props = {
  fill?: PathProps['fill']
  style?: TextProps['style']
} & Omit<SvgProps, 'style'>

export const Logo = React.forwardRef(function LogoImpl(props: Props, ref) {
  const {fill, ...rest} = props
  const gradient = fill === 'sky'
  const styles = StyleSheet.flatten(props.style)
  const _fill = gradient ? 'url(#sky)' : fill || styles?.color || colors.blue3
  // @ts-ignore it's fiiiiine
  const size = parseInt(rest.width || 32)

  const isKawaii = useKawaiiMode()

  if (isKawaii) {
    return (
      <Image
        source={
          size > 100
            ? require('../../../assets/kawaii.png')
            : require('../../../assets/kawaii_smol.png')
        }
        accessibilityLabel="Bluesky"
        accessibilityHint=""
        accessibilityIgnoresInvertColors
        style={[{height: size, aspectRatio: 1.4}]}
      />
    )
  }

  return (
    <Svg
      fill="none"
      // @ts-ignore it's fiiiiine
      ref={ref}
      viewBox="0 0 64 57"
      {...rest}
      style={[{width: size, height: size * ratio}, styles]}>
      {gradient && (
        <Defs>
          <LinearGradient id="sky" x1="0" y1="0" x2="0" y2="1">
            <Stop offset="0" stopColor="#0A7AFF" stopOpacity="1" />
            <Stop offset="1" stopColor="#59B9FF" stopOpacity="1" />
          </LinearGradient>
        </Defs>
      )}

      <G stroke="none" strokeWidth={1} fill="none" fillRule="evenodd">
        <Path
          d="M15.383 0h26.234c5.349 0 7.289.557 9.244 1.603a10.904 10.904 0 014.536 4.536C56.443 8.094 57 10.034 57 15.383v26.234c0 5.349-.557 7.289-1.603 9.244a10.904 10.904 0 01-4.536 4.536C48.906 56.443 46.966 57 41.617 57H15.383c-5.349 0-7.289-.557-9.244-1.603a10.904 10.904 0 01-4.536-4.536C.557 48.906 0 46.966 0 41.617V15.383c0-5.349.557-7.289 1.603-9.244a10.904 10.904 0 014.536-4.536C8.094.557 10.034 0 15.383 0z"
          fill="#C22EFF"
        />
        <G fill="#FFE6D5" fillRule="nonzero">
          <Path
            d="M43.098 23.513c0-4.447-3.608-8.065-8.043-8.065-2.83 0-5.32 1.478-6.753 3.7-1.433-2.222-3.922-3.7-6.752-3.7-2.831 0-5.32 1.478-6.754 3.701-1.434-2.223-3.923-3.7-6.753-3.7C3.608 15.448 0 19.065 0 23.512c0 4.32 3.406 7.847 7.665 8.046a8.023 8.023 0 00-.912 3.715c0 4.303 3.381 7.82 7.617 8.044a8.021 8.021 0 00-.864 3.616c0 4.448 3.608 8.066 8.043 8.066 4.434 0 8.042-3.618 8.042-8.066a8.021 8.021 0 00-.864-3.616c4.236-.225 7.617-3.74 7.617-8.044a8.02 8.02 0 00-.91-3.715c4.258-.2 7.664-3.727 7.664-8.046zM21.55 18.035c3.012 0 5.463 2.458 5.463 5.478 0 3.021-2.45 5.479-5.463 5.479s-5.464-2.458-5.464-5.479c0-3.02 2.451-5.478 5.464-5.478zM2.58 23.513c0-3.02 2.451-5.478 5.463-5.478 3.013 0 5.464 2.458 5.464 5.478 0 3.021-2.451 5.479-5.464 5.479-3.012 0-5.463-2.458-5.463-5.479zm6.754 11.76c0-3.02 2.45-5.478 5.463-5.478 3.012 0 5.463 2.458 5.463 5.479 0 1.83-.904 3.45-2.283 4.446a8.096 8.096 0 00-.95.55 5.41 5.41 0 01-2.231.483c-3.012 0-5.462-2.458-5.462-5.48zm12.216 17.14c-3.013 0-5.464-2.458-5.464-5.479 0-1.83.903-3.449 2.282-4.444.33-.165.65-.345.95-.55a5.4 5.4 0 014.463 0c.301.205.621.385.95.55a5.473 5.473 0 012.282 4.444c0 3.021-2.451 5.48-5.463 5.48zm6.752-11.66c-.795 0-1.55-.175-2.23-.483a8.081 8.081 0 00-.95-.55 5.476 5.476 0 01-2.283-4.446c0-3.021 2.451-5.48 5.463-5.48s5.463 2.459 5.463 5.48c0 3.021-2.45 5.48-5.463 5.48zm6.753-11.762c-3.012 0-5.463-2.458-5.463-5.478 0-3.02 2.451-5.479 5.463-5.479 3.013 0 5.464 2.458 5.464 5.479 0 3.02-2.451 5.478-5.464 5.478zM23.232 14.727c6.363 0 8.11-5.316 8.145-8.126a1.293 1.293 0 00-1.244-1.307c-2.202-.07-4.323.746-5.885 2.307-1.445 1.444-2.308 3.625-2.308 5.834 0 .714.578 1.292 1.292 1.292zm2.844-5.3A5.284 5.284 0 0128.58 8.02c-.356 1.412-1.313 3.417-3.878 3.975.216-.896.646-1.84 1.374-2.566zM20.463 12.563c.716 0 1.297-.581 1.297-1.298C21.76 2.466 14.405.05 10.516.001 9.806-.026 9.23.547 9.204 1.25a10.952 10.952 0 003.185 8.126c1.994 1.996 5.012 3.187 8.074 3.187zm-1.38-2.703c-1.625-.248-3.485-.942-4.86-2.318a8.223 8.223 0 01-2.365-4.796c2.266.398 6.573 1.846 7.224 7.114z"
            transform="translate(7 .95)"
          />
        </G>
      </G>

      {/* <G
        transform="translate(-91 -56) translate(91 56)"
        stroke="none"
        strokeWidth={1}
        fill="none"
        fillRule="evenodd">
        <Rect fill="#C22EFF" x={0} y={0} width={400} height={400} rx={100} />
        <G transform="translate(81 58)" fill="#FFF" fillRule="nonzero">
          <Path d="M137.681701 57.3150657L146.15457 57.3150657 146.15457 49.2374719 149.442935 49.2374719 157.912574 49.2374719 157.912574 41.1663376 161.908357 41.1663376 170.381226 41.1663376 170.381226 33.0887438 173.669591 33.0887438 182.13923 33.0887438 182.13923 25.0143798 186.138243 25.0143798 186.53233 25.0143798 194.607882 25.0143798 194.607882 16.5459868 195.399286 16.5459868 203.872156 16.5459868 203.872156 8.47162275 211.789427 8.47162275 220.259066 8.47162275 220.259066 0 211.789427 0 203.316558 0 194.843688 0 194.843688 8.07436404 186.926417 8.07436404 178.456778 8.07436404 178.456778 16.5459868 178.059461 16.5459868 169.987139 16.5459868 169.987139 24.6203508 165.196722 24.6203508 156.723853 24.6203508 156.723853 32.6947149 153.438718 32.6947149 144.965849 32.6947149 144.965849 40.7690789 140.970066 40.7690789 132.497197 40.7690789 132.497197 48.8434429 129.212062 48.8434429 120.739193 48.8434429 120.739193 57.3150657 129.212062 57.3150657z" />
          <G transform="translate(0 62.773)">
            <Path d="M203.319788 38.1174577L211.789427 38.1174577 211.789427 29.645835 203.319788 29.645835 194.843688 29.645835 186.37405 29.645835 186.37405 38.1174577 194.843688 38.1174577z" />
            <Path d="M177.904411 46.5890805L186.37405 46.5890805 186.37405 38.1174577 177.904411 38.1174577 169.431541 38.1174577 169.431541 46.5890805 169.431541 55.0574735 177.904411 55.0574735z" />
            <Path d="M169.431541 63.5290962L169.431541 55.0574735 160.958672 55.0574735 160.958672 63.5290962 160.958672 71.9974892 160.958672 80.469112 169.431541 80.469112 169.431541 71.9974892z" />
            <Path d="M177.904411 88.937505L177.904411 80.469112 169.431541 80.469112 169.431541 88.937505 169.431541 97.4091277 177.904411 97.4091277 186.37405 97.4091277 186.37405 88.937505z" />
            <Path d="M194.843688 97.4091277L186.37405 97.4091277 186.37405 105.877521 194.843688 105.877521 203.319788 105.877521 211.789427 105.877521 211.789427 97.4091277 203.319788 97.4091277z" />
            <Path d="M220.259066 88.937505L211.789427 88.937505 211.789427 97.4091277 220.259066 97.4091277 228.731935 97.4091277 228.731935 88.937505 228.731935 80.469112 220.259066 80.469112z" />
            <Path d="M228.731935 63.5290962L228.731935 71.9974892 228.731935 80.469112 237.204804 80.469112 237.204804 71.9974892 237.204804 63.5290962 237.204804 55.0574735 228.731935 55.0574735z" />
            <Path d="M220.259066 46.5890805L220.259066 55.0574735 228.731935 55.0574735 228.731935 46.5890805 228.731935 38.1174577 220.259066 38.1174577 211.789427 38.1174577 211.789427 46.5890805z" />
            <Path d="M42.3611156 8.47162275L50.8307545 8.47162275 50.8307545 0 42.3611156 0 33.8882464 0 25.4186075 0 25.4186075 8.47162275 33.8882464 8.47162275z" />
            <Path d="M16.9457383 16.9432455L25.4186075 16.9432455 25.4186075 8.47162275 16.9457383 8.47162275 8.46963894 8.47162275 8.46963894 16.9432455 8.46963894 25.4116385 16.9457383 25.4116385z" />
            <Path d="M8.46963894 33.8800315L8.46963894 25.4116385 0 25.4116385 0 33.8800315 0 42.354884 0 50.8200472 8.46963894 50.8200472 8.46963894 42.354884z" />
            <Path d="M16.9457383 59.29167L16.9457383 50.8200472 8.46963894 50.8200472 8.46963894 59.29167 8.46963894 67.7632927 16.9457383 67.7632927 25.4186075 67.7632927 25.4186075 59.29167z" />
            <Path d="M59.3003935 59.29167L50.8307545 59.29167 50.8307545 67.7632927 59.3003935 67.7632927 67.7732626 67.7632927 67.7732626 59.29167 67.7732626 50.8200472 59.3003935 50.8200472z" />
            <Path d="M67.7732626 42.354884L67.7732626 50.8200472 76.2429016 50.8200472 76.2429016 42.354884 76.2429016 33.8800315 76.2429016 25.4116385 67.7732626 25.4116385 67.7732626 33.8800315z" />
            <Path d="M59.3003935 16.9432455L59.3003935 25.4116385 67.7732626 25.4116385 67.7732626 16.9432455 67.7732626 8.47162275 59.3003935 8.47162275 50.8307545 8.47162275 50.8307545 16.9432455z" />
            <Path d="M55.065574 84.7033085L63.5384431 84.7033085 63.5384431 76.2349155 55.065574 76.2349155 50.8307545 76.2349155 50.8307545 67.7632927 42.3611156 67.7632927 33.8882464 67.7632927 25.4186075 67.7632927 25.4186075 76.2349155 33.8882464 76.2349155 38.1230659 76.2349155 38.1230659 84.7033085 46.5927048 84.7033085z" />
            <Path d="M29.6534269 93.1749312L38.1230659 93.1749312 38.1230659 84.7033085 29.6534269 84.7033085 21.1805578 84.7033085 21.1805578 93.1749312 21.1805578 101.643324 29.6534269 101.643324z" />
            <Path d="M21.1805578 110.111717L21.1805578 101.643324 12.7076886 101.643324 12.7076886 110.111717 12.7076886 118.58657 12.7076886 127.054963 21.1805578 127.054963 21.1805578 118.58657z" />
            <Path d="M29.6534269 135.523356L29.6534269 127.054963 21.1805578 127.054963 21.1805578 135.523356 21.1805578 143.994978 29.6534269 143.994978 38.1230659 143.994978 38.1230659 135.523356z" />
            <Path d="M72.0080821 135.523356L63.5384431 135.523356 63.5384431 143.994978 67.7732626 143.994978 67.7732626 152.466601 76.2429016 152.466601 84.7190009 152.466601 93.1886399 152.466601 93.1886399 143.994978 84.7190009 143.994978 80.4809512 143.994978 80.4809512 135.523356 80.4809512 127.054963 72.0080821 127.054963z" />
            <Path d="M80.4809512 118.58657L80.4809512 127.054963 88.9538204 127.054963 88.9538204 118.58657 88.9538204 110.111717 88.9538204 101.643324 80.4809512 101.643324 80.4809512 110.111717z" />
            <Path d="M72.0080821 93.1749312L72.0080821 101.643324 80.4809512 101.643324 80.4809512 93.1749312 80.4809512 84.7033085 72.0080821 84.7033085 63.5384431 84.7033085 63.5384431 93.1749312z" />
            <Path d="M59.3036237 160.934994L67.7732626 160.934994 67.7732626 152.466601 63.5384431 152.466601 63.5384431 143.994978 55.065574 143.994978 46.5927048 143.994978 38.1230659 143.994978 38.1230659 152.466601 46.5927048 152.466601 50.8307545 152.466601 50.8307545 160.934994 50.8307545 169.406617 59.3036237 169.406617z" />
            <Path d="M50.8307545 177.87501L50.8307545 169.406617 42.3611156 169.406617 42.3611156 177.87501 42.3611156 186.346633 42.3611156 194.818255 50.8307545 194.818255 50.8307545 186.346633z" />
            <Path d="M59.3036237 203.286648L59.3036237 194.818255 50.8307545 194.818255 50.8307545 203.286648 50.8307545 211.758271 59.3036237 211.758271 67.7732626 211.758271 67.7732626 203.286648z" />
            <Path d="M76.2429016 211.758271L67.7732626 211.758271 67.7732626 220.226664 76.2429016 220.226664 84.7190009 220.226664 93.1886399 220.226664 93.1886399 211.758271 84.7190009 211.758271z" />
            <Path d="M101.661509 203.286648L93.1886399 203.286648 93.1886399 211.758271 101.661509 211.758271 110.131148 211.758271 110.131148 203.286648 110.131148 194.818255 101.661509 194.818255z" />
            <Path d="M110.131148 177.87501L110.131148 186.346633 110.131148 194.818255 118.604017 194.818255 118.604017 186.346633 118.604017 177.87501 118.604017 169.406617 110.131148 169.406617z" />
            <Path d="M101.661509 160.934994L101.661509 169.406617 110.131148 169.406617 110.131148 160.934994 110.131148 152.466601 101.661509 152.466601 93.1886399 152.466601 93.1886399 160.934994z" />
            <Path d="M135.546525 88.937505L144.016164 88.937505 144.016164 80.469112 135.546525 80.469112 127.073656 80.469112 118.604017 80.469112 118.604017 88.937505 127.073656 88.937505z" />
            <Path d="M110.131148 97.4091277L118.604017 97.4091277 118.604017 88.937505 110.131148 88.937505 101.661509 88.937505 101.661509 97.4091277 101.661509 105.877521 110.131148 105.877521z" />
            <Path d="M101.661509 114.349143L101.661509 105.877521 93.1886399 105.877521 93.1886399 114.349143 93.1886399 122.820766 93.1886399 131.289159 101.661509 131.289159 101.661509 122.820766z" />
            <Path d="M110.131148 139.757552L110.131148 131.289159 101.661509 131.289159 101.661509 139.757552 101.661509 148.229175 110.131148 148.229175 118.604017 148.229175 118.604017 139.757552z" />
            <Path d="M127.073656 148.229175L118.604017 148.229175 118.604017 156.700798 127.073656 156.700798 135.546525 156.700798 144.016164 156.700798 144.016164 148.229175 135.546525 148.229175z" />
            <Path d="M152.489033 139.757552L144.016164 139.757552 144.016164 148.229175 152.489033 148.229175 160.958672 148.229175 160.958672 139.757552 160.958672 131.289159 152.489033 131.289159z" />
            <Path d="M160.958672 114.349143L160.958672 122.820766 160.958672 131.289159 169.431541 131.289159 169.431541 122.820766 169.431541 114.349143 169.431541 105.877521 160.958672 105.877521z" />
            <Path d="M152.489033 97.4091277L152.489033 105.877521 160.958672 105.877521 160.958672 97.4091277 160.958672 88.937505 152.489033 88.937505 144.016164 88.937505 144.016164 97.4091277z" />
            <Path d="M127.073656 8.47162275L135.546525 8.47162275 135.546525 0 127.073656 0 118.604017 0 110.131148 0 110.131148 8.47162275 118.604017 8.47162275z" />
            <Path d="M101.661509 16.9432455L110.131148 16.9432455 110.131148 8.47162275 101.661509 8.47162275 93.1886399 8.47162275 93.1886399 16.9432455 93.1886399 25.4116385 101.661509 25.4116385z" />
            <Path d="M93.1886399 42.354884L93.1886399 33.8800315 93.1886399 25.4116385 84.7190009 25.4116385 84.7190009 33.8800315 84.7190009 42.354884 84.7190009 50.8200472 93.1886399 50.8200472z" />
            <Path d="M101.661509 59.29167L101.661509 50.8200472 93.1886399 50.8200472 93.1886399 59.29167 93.1886399 67.7632927 101.661509 67.7632927 110.131148 67.7632927 110.131148 59.29167z" />
            <Path d="M118.604017 67.7632927L110.131148 67.7632927 110.131148 76.2349155 118.604017 76.2349155 127.073656 76.2349155 135.546525 76.2349155 135.546525 67.7632927 127.073656 67.7632927z" />
            <Path d="M144.016164 59.29167L135.546525 59.29167 135.546525 67.7632927 144.016164 67.7632927 152.489033 67.7632927 152.489033 59.29167 152.489033 50.8200472 144.016164 50.8200472z" />
            <Path d="M152.489033 42.354884L152.489033 50.8200472 160.958672 50.8200472 160.958672 42.354884 160.958672 33.8800315 160.958672 25.4116385 152.489033 25.4116385 152.489033 33.8800315z" />
            <Path d="M144.016164 16.9432455L144.016164 25.4116385 152.489033 25.4116385 152.489033 16.9432455 152.489033 8.47162275 144.016164 8.47162275 135.546525 8.47162275 135.546525 16.9432455z" />
          </G>
        </G>
      </G> */}

      {/* <Path
        fill={_fill}
        d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805ZM50.127 3.805C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745Z"
      /> */}
    </Svg>
  )
})
